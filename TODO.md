# TODO

- ## 메소드 시큐리티 도입

- ## 서비스 보안 의존성 제거

- _동시 진행?_
- 보안 경계의 일관성을 한 번에 확립해야 테스트/운영 안정성이 올라가고,  
  서비스 계층의 순수화와 메소드 보안이 서로를 보완하기 때문
- 상세
  - 경계 분리의 상호 보완
    - URL 보호(SecurityFilterChain)로 “인증이 필요한가”를 1차로 확정하고,  
      @PreAuthorize로 “누가 접근 가능한가(소유/역할)”를 2차로 확정한다.  
      이때 서비스 계층은 SecurityContext에 의존하지 않는 순수 인자(email, isAdmin 등)로 동작해야  
      테스트가 견고해진다. 두 축을 동시에 적용해야 컨트롤러/서비스 책임 경계가 흔들리지 않는다.

  - 테스트 안정성과 회귀 리스크 최소화
    - @PreAuthorize만 먼저 넣으면 서비스가 SecurityContext를 또 읽는 이중 검증으로 불안정해질 수 있고,  
      반대로 서비스만 순수화하면 인가가 빠져 버그가 생긴다.  
      **`한 PR에 “보안 어노테이션 + 서비스 순수화 + 단위/슬라이스 테스트”를 묶어 적용하면 회귀를 즉시 잡아낸다.`**

  - 유지보수 비용 절감
    - 도메인 로직과 보안 로직의 결합을 끊어야 변화(정책 수정, 역할 추가)에 따른 영향 범위가  
      Security 계층으로 국한된다. 동시에 적용해야 코드 이동(컨트롤러↔서비스)로 불필요한 중간 상태가 생기지 않는다.

