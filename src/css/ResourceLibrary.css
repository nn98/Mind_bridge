/* ============ Tokens ============ */
:root {
    --ink1: #14151c;
    --ink2: #4b4e58;
    --ink3: #888d98;
    --brand1: #7c5cff;
    --brand2: #a18cd1;
    --brand3: #d7cff9;
    --border: rgba(150, 160, 200, .28);
    --card: #fff;
    --glow: 0 10px 24px rgba(124, 92, 255, .25);
}

/* 루트: 좌측 앱 사이드바 260px 고려 */
.rl-root {
    max-width: 1100px;
    margin: 0 24px 96px 260px; /* 상단 여백 0 */
    padding: 0;
    font-family: "Pretendard", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", "Malgun Gothic", sans-serif;
    color: var(--ink1);
}

/* ============ Header ============ */
.library-header {
    margin-bottom: 0;
}

.library-title {
    margin: 0 0 12px;
    font-size: 2.1rem;
    font-weight: 900;
    letter-spacing: -.02em;
}

.topic-tabs {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.topic-tab {
    padding: 10px 18px;
    border-radius: 9999px;
    border: 1px solid var(--border);
    background: #f7f7fb;
    color: var(--ink2);
    font-weight: 800;
    cursor: pointer;
    transition: .16s;
}

.topic-tab:hover {
    transform: translateY(-1px);
    background: #efeaff;
    box-shadow: 0 6px 12px rgba(124, 92, 255, .14);
}

.topic-tab.active {
    border-color: transparent;
    color: #fff;
    background: linear-gradient(90deg, var(--brand1), var(--brand2));
    box-shadow: var(--glow);
}

/* ============ Content wrap (핵심) ============ */
/* 겹치기 레이아웃: aside가 높이를 밀지 않도록 같은 셀 위에 overlay */
.library-grid {
    position: relative;
    display: grid;
    grid-template-columns: 1fr; /* 한 셀에 겹친다 */
}

/* 왼쪽 사이드 탭 */
.content-sidenav {
    grid-area: 1 / 1; /* 본문과 같은 셀 */
    z-index: 2;
    position: sticky;
    top: 0;
    width: 170px;
    margin-left: -190px; /* 왼쪽 거터로 빼기 */
    display: flex;
    flex-direction: column;
    gap: 8px;
    align-self: start;
}

.side-tab {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 14px;
    border-radius: 12px;
    border: 1px solid var(--border);
    background: #ffffff;
    color: var(--ink2);
    font-weight: 900;
    cursor: pointer;
    transition: .16s;
    box-shadow: 0 2px 8px rgba(0, 0, 0, .03);
}

.side-tab:hover {
    transform: translateX(2px);
    background: #f4f1ff;
    border-color: #d9d2ff;
}

.side-tab.active {
    color: #fff;
    border-color: transparent;
    background: linear-gradient(90deg, var(--brand1), var(--brand2));
    box-shadow: var(--glow);
}

.dot {
    width: 10px;
    height: 10px;
    border-radius: 999px;
    display: inline-block;
    background: #cfd3e6;
}

.dot.overview {
    background: #8aa0ff;
}

.dot.selftest {
    background: #ff8a8a;
}

.dot.rec {
    background: #7c5cff;
}

/* 본문 */
.content-main {
    grid-area: 1 / 1; /* 사이드탭과 동일 셀(겹치기) */
    z-index: 1; /* 사이드탭 아래 */
    min-width: 0;
    margin: 0;
    padding-top: 0;
}

.content-title {
    font-size: 1.5rem;
    font-weight: 900;
    letter-spacing: -.01em;
    margin: 0 0 12px; /* top 0 */
    padding-top: 23px;
    border-bottom: 2px solid var(--brand2);
}

/* 카드 */
.content-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 22px 24px;
    margin-bottom: 20px;
    box-shadow: 0 2px 10px rgba(16, 16, 40, .04);
}

.content-card h3 {
    font-size: 1.12rem;
    font-weight: 800;
    margin: 0 0 12px;
}

.content-card p {
    color: var(--ink2);
    line-height: 1.85;
    margin: 0;
}

/* 추천 카드 */
.recommendations-list {
    display: grid;
    grid-template-columns:1fr;
    gap: 12px;
}

.recommendation-card {
    background: #fbfbff;
    border: 1px solid var(--border);
    border-left: 5px solid var(--brand2);
    border-radius: 14px;
    padding: 16px;
    transition: .18s;
}

.recommendation-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(124, 92, 255, .18);
}

.rec-title {
    font-weight: 800;
    margin: 0 0 6px;
}

.rec-author {
    color: var(--ink3);
    font-size: .95rem;
    margin: 0 0 8px;
}

.rec-description {
    color: var(--ink2);
    margin: 0;
    line-height: 1.65;
}

/* ============ SelfTest (locked) ============ */
.selftest-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 16px;
    box-shadow: 0 6px 16px rgba(0, 0, 0, .05);
}

.selftest-head {
    display: flex;
    flex-direction: column;
    gap: 6px;
    margin-bottom: 6px;
}

.selftest-head h2 {
    margin: 0;
    font-size: 1.2rem;
    font-weight: 900;
}

.type-lock {
    font-size: .9rem;
    color: var(--ink3);
}

.selftest-meta h3 {
    margin: 6px 0 4px;
    font-size: 1rem;
    font-weight: 800;
}

.test-source, .test-guide {
    color: var(--ink3);
    font-size: .95rem;
    margin: 2px 0;
    line-height: 1.6;
}

.self-test-list {
    list-style: none;
    padding: 0;
    margin: 12px 0 0;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.self-test-item {
    background: #fff;
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 12px;
}

.self-test-item .question {
    font-weight: 800;
    margin: 0 0 8px;
}

.self-option-group {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.self-option {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    border: 1px dashed var(--border);
    border-radius: 999px;
    background: #f5f7ff;
    cursor: pointer;
    user-select: none;
    transition: .14s;
}

.self-option:hover {
    background: #edf0ff;
    border-color: #d9d2ff;
    transform: translateY(-1px);
}

.self-option input[type="radio"] {
    accent-color: var(--brand1);
}

.self-button-group {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-top: 14px;
}

.self-button {
    padding: 10px 14px;
    border-radius: 12px;
    font-weight: 900;
    cursor: pointer;
    border: 1px solid var(--border);
    background: #fff;
    color: var(--ink2);
    transition: .14s;
}

.self-button.primary {
    border-color: transparent;
    color: #fff;
    background: linear-gradient(90deg, var(--brand1), var(--brand2));
    box-shadow: var(--glow);
}

.self-button.ghost:hover {
    background: #f3f2ff;
    border-color: #d9d2ff;
}

.result-card {
    margin-top: 14px;
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 14px;
    background: #fbfbff;
}

.result-title {
    margin: 0 0 6px;
    font-size: 1.05rem;
    font-weight: 900;
}

.result-description {
    color: var(--ink2);
    line-height: 1.65;
    margin: 0 0 6px;
}

.result-category-block + .result-category-block {
    margin-top: 8px;
}

.result-category-title {
    font-weight: 800;
}

.recommendation-list {
    margin: 6px 0 0;
    padding-left: 1rem;
    color: var(--ink2);
    line-height: 1.6;
}

/* ============ Responsive ============ */
@media (max-width: 1280px) {
    .rl-root {
        margin-left: 240px;
    }
}

@media (max-width: 1024px) {
    .rl-root {
        margin: 20px 16px 64px 16px;
    }

    /* 모바일에서는 겹치기 해제하고 자연스럽게 흐르게 */
    .library-grid {
        display: block;
    }

    .content-sidenav {
        position: static;
        width: auto;
        margin-left: 0;
        flex-direction: row;
        flex-wrap: wrap;
        gap: 8px;
        z-index: auto;
        margin-top: 16px;
    }
}
