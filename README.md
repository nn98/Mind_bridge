# _`Mind_Bridge`_

***

> ## Architecture
> ![](https://velog.velcdn.com/images/nn98/post/8d6dd7ff-cf5a-40dc-90a0-442c12827114/image.png)

***

> ## Usecase
> ![](https://velog.velcdn.com/images/nn98/post/b6020032-0105-484c-a67a-b94fe91b2d1b/image.png)

***

> ## Commit Convention
> - ### 숙지 후 제거
>
> <img src="https://github.com/user-attachments/assets/059f14b1-7da7-4685-a39a-7272016cac24" style="width:500px"/>

***

> ## _Troubleshooting_
> ***
> # 1. `JWT` 적용에 따른 필터링 관련
> - ### _개요_
> 
> | `구분` |          `내용`          |
> |:----:|:----------------------:|
> | `날짜` |      `2025-08-22`      |
> | `종류` |       `로그인` `토큰`       |
> | `상황` | 신규 PC에서 로그인 시도 시 에러 발생 |
> | `에러` |    AxiosError - 401    |
> | `원인` |  JWT 도입에 따른 토큰 필터링 강화  |
> | `해결` |    화이트리스트 설정, 예외처리     |
>
> - ### _특이점_
>
> |  `구분`  |                              `내용`                               |
> |:------:|:---------------------------------------------------------------:|
> | `!특이점` |     기존 개발/테스트 진행한 PC는 정상적으로 로그인 가능, <br/>이에 에러 발생 식별이 지연됨.      |
> | `원인은?` | 기존 로그인 기록이 있을 경우, 브라우저가 토큰 보유.<br/>만료된 토큰이라도 보유는 하고 있기에 필터링 통과. |
> |  `조치`  |                클린 테스트, 단위/웹 테스트 구현으로 항상성/무결성 보장                 |
> 
> - ### [_기록_](https://tattered-reason-ed8.notion.site/error-2025-08-22-2579e83ff32d8013a385d2ca1c4ac149)
> 
> ***
>
> # 2. `JWT` 화이트리스트 적용에 따른 필터링 관련
> - ### _개요_
> 
> | `구분` |                                           `내용`                                           |
> |:----:|:----------------------------------------------------------------------------------------:|
> | `날짜` |                                       `2025-08-25`                                       |
> | `종류` |                                        `인증` `경로`                                         |
> | `상황` |                리팩토링된 구조와 변경된 경로에 따른 불일치 다수 발생<br/>그 중 401 에러도 404 에러도 아닌                 |
> | `에러` | `FE` : AxiosError - 400 : ERR_BAD_REQUEST<br/>`BE` : "authentication" is null<br/>에러 발생. |
> | `원인` |                   테스트 차 화이트리스트에 등록한 엔드포인트(`api/posts`)에서 JWT 포함된 요청 전달                   |
> | `해결` |                                화이트리스트 재설정, 예외처리, 인증 로직 개선                                |
>
> - ### _특이점_
>
> |          `구분`           |                                                                                                                `내용`                                                                                                                 |
> |:-----------------------:|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
> | `특이점`<br/>`Singularity` |                                                                                                   백엔드 구조 개편에 따른 로직/경로 변동에 의한 오류.                                                                                                    |
> |    `원인`<br/>`Cause`     |                                                                                         전체 JWT 필터 미적용 + 일부 필터 적용 → 전체 JWT 필터 적용 + 일부 필터 미적용                                                                                         |
> |    `조치`<br/>`Action`    |                                                                                `화이트리스트` 생성, 필터가 적용되지 않아야 하는(JTW 없는) 요청<br/>화이트리스트에 등록해 필터 건너뛰고 응답받도록                                                                                |
> |   `해법`<br/>`Solution`   |                                                                                              소규모 과정과정에서의 커밋? 테스트를 활용한 무결성 검증? `통합 개편?`                                                                                              |
> `각 커밋은 기능의 정상적 동작을 보증해야 한다`  
> - ## _후속조치_
> 
> |         `구분`          |                                                                                                                `내용`                                                                                                                 |
> |:---------------------:|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
> | `추가`<br/>`Additional` |                                                                              지속적으로 관련된 오류가 빈발 == 설정이나 접근이 최초부터 잘못됨<br/>근본적인 원인 분석과 새로운 접근 방식으로 해결이 필요                                                                               |
> |  `분석`<br/>`Analyze`   |                                               앞선 조치의 결과, `화이트리스트` 에 속한 경로는 <br/>아예 필터를 건너뛰어 토큰 확인이나 CORS 설정 등이 누락<br/>`필터링` 과도로 보안 규칙보다 필터가 우선됨, <br/>정상적인 공개 접근 요청도 토큰이 없으면 무조건 401                                                |
> |  `문제점`<br/>`Problem`  |                                                              정상적인 공개 접근은 토큰이 없어도 응답<br/>같은 엔드포인트도 토큰이 있을 때 / 없을 때 각각 핸들링 필요<br/>토큰이 아예 필요 없는 요청들도 CORS등 공통적인 설정 적용 필요                                                               |
> |   `해결`<br/>`Solve`    | `인증` 과 `인가` 를 분리해서 접근<br/>`토큰 검증, 인증은 필터가 / 접근 제어, 인가는 보안 규칙이`<br/>보다 표준 아키텍처에 적합한 구조로 변경. <br/>공개 API를 체인 밖으로 빼지(화이트리스트 shouldNotFilter) 않고, <br/>토큰 부재를 예외(401)로 처리하지 않음으로써 <br/>일관된 설정과 정책을 SecurityFilterChain을 통해 보장, 유지보수성 개선 |
> `각 커밋은 기능의 정상적 동작을 보증해야 한다`
> 
> - ### [_기록_]()
